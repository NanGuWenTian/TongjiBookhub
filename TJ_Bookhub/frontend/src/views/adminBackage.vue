<template>
  <div class="page-container">
    <!-- 顶部导航栏 -->
    <header class="header">
      <div class="header-left">
        <button @click="toggleSidebar" class="sidebar-toggle">
          <svg v-if="!isSidebarCollapsed" t="1750699467862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29861" width="25" height="25">
            <path d="M104 64h815c22.091 0 40 17.909 40 40s-17.909 40-40 40H104c-22.091 0-40-17.909-40-40s17.909-40 40-40z m1 408h462c22.091 0 40 17.909 40 40s-17.909 40-40 40H105c-22.091 0-40-17.909-40-40s17.909-40 40-40z m0 408h815c22.091 0 40 17.909 40 40s-17.909 40-40 40H105c-22.091 0-40-17.909-40-40s17.909-40 40-40z m666.627-567.931l177.304 177.304c12.497 12.496 12.497 32.758 0 45.254L771.627 711.931c-12.496 12.497-32.758 12.497-45.254 0A32 32 0 0 1 717 689.304V334.696c0-17.673 14.327-32 32-32a32 32 0 0 1 22.627 9.373z" fill="#ffffff" p-id="29862">
            </path>
          </svg>
          <svg v-else t="1750699563182" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31710" width="25" height="25">
            <path d="M960 104l0 815c0 22.091-17.909 40-40.00000001 40s-40-17.909-39.99999999-40L880 104c0-22.091 17.909-40 40-40s40 17.909 40 40z m-408 1l0 462c0 22.091-17.909 40-40 40s-40-17.909-40-40L472 105c0-22.091 17.909-40 40-40s40 17.909 40 40z m-408 0l0 815c0 22.091-17.909 40-40 40s-40-17.909-40-40L64 105c0-22.091 17.909-40 40.00000001-40s40 17.909 39.99999999 40z m567.931 666.627l-177.304 177.304c-12.496 12.497-32.758 12.497-45.254 0L312.069 771.627c-12.497-12.496-12.497-32.758 0-45.254A32 32 0 0 1 334.696 717L689.304 717c17.67299999 0 32 14.327 32 32a32 32 0 0 1-9.373 22.627z" fill="#ffffff" p-id="31711">
            </path>
          </svg>
        </button>
        <img :src="brandMark" alt="商标消失了" class="brand-mark">
        <h1 class="page-title">后台管理系统</h1>
      </div>
      <div class="header-right">
        <div class="user-profile" @mouseenter="showUserCard" @mouseleave="hideUserCard">
          <img :src="userInfo.avatar" alt="用户头像" class="user-avatar">
          <div class="user-info-card" v-if="showCard">
            <div class="card-content">
              <div class="user-name">{{ userInfo.username }}</div>
              <div class="user-role">{{ userInfo.role }}</div>
              <div class="user-email">{{ userInfo.email }}</div>
            </div>
          </div>
        </div>
      </div>

    </header>

    <div class="sidebar" :class="{'collapsed': isSidebarCollapsed}" @toggle="toggleSidebar">
        <div class="sidebar-menu">
          <div class="menu-group">
            <router-link to="/admin/user-table" class="menu-item">
              <svg t="1750657616045" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20058" width="25" height="25">
                <path d="M512 1022.1056c-282.3168 0-511.232-228.864-511.232-511.0784S229.632 0 512 0c282.3168 0 511.232 228.8128 511.232 511.0272 0 282.2656-228.864 511.0784-511.232 511.0784z m0-926.2592a415.2832 415.2832 0 0 0-415.3856 415.232c0 107.2128 41.0624 204.6464 107.8272 278.3232 60.16-29.1328 38.0416-4.9152 116.736-37.2736 80.5888-33.1264 99.6352-44.6464 99.6352-44.6464l0.768-76.288s-30.1568-22.8864-39.5264-94.72c-18.8928 5.4272-25.088-22.016-26.2144-39.424-1.024-16.896-10.9568-69.4784 12.0832-64.7168-4.7104-35.1744-8.0896-66.8672-6.4-83.6608 5.7344-58.88 62.976-120.5248 151.0912-124.9792 103.68 4.4544 144.7424 66.048 150.528 124.928 1.6384 16.8448-2.048 48.5376-6.7584 83.6096 23.04-4.6592 13.0048 47.872 11.8784 64.7168-1.024 17.408-7.3728 44.7488-26.2144 39.3728-9.4208 71.7824-39.5776 94.464-39.5776 94.464l0.7168 75.9296s19.0976 10.8032 99.6352 43.9296c78.6944 32.3584 56.576 9.5744 116.736 38.7584a413.184 413.184 0 0 0 107.776-278.3744A415.232 415.232 0 0 0 512 95.7952z" fill="#ffffff" p-id="20059">
              </path></svg>
              <span v-if="!isSidebarCollapsed">用户表</span>
            </router-link>
            <router-link to="/admin/book-table" class="menu-item">
              <svg t="1750657430400" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16406" width="25" height="25">
                <path d="M831.968753 0H192.031247c-52.994825 0-95.990626 42.995801-95.990626 95.990626v834.418514c0 1.599844 0.09999 3.299678 0.299971 4.899521 0.09999 0.799922 0.09999 1.599844 0.19998 2.499756 4.599551 44.995606 40.696026 80.992091 85.691632 85.691632 0.799922 0.09999 1.599844 0.19998 2.499756 0.19998 1.599844 0.09999 3.299678 0.19998 4.899521 0.299971h644.937018c1.599844 0 3.299678-0.09999 4.899522-0.299971 0.799922-0.09999 1.599844-0.09999 2.499756-0.19998 44.995606-4.599551 80.992091-40.696026 85.691631-85.691632 0.09999-0.799922 0.19998-1.599844 0.199981-2.499756 0.09999-1.599844 0.19998-3.299678 0.29997-4.899521V95.990626C927.959379 42.995801 884.963578 0 831.968753 0z m31.996875 927.909384v2.099795c0 0.299971 0 0.499951-0.09999 0.799922-0.09999 0.799922-0.19998 1.499854-0.299971 2.299775 0 0.299971-0.09999 0.599941-0.19998 0.899912 0 0.299971-0.09999 0.599941-0.199981 0.899912-2.699736 12.098818-12.198809 21.597891-24.297627 24.297628-0.299971 0.09999-0.599941 0.09999-0.899912 0.19998-0.299971 0.09999-0.599941 0.09999-0.899912 0.09999-0.699932 0.09999-1.499854 0.19998-2.299775 0.299971-0.299971 0-0.499951 0-0.799922 0.09999H189.931452c-0.299971 0-0.499951 0-0.799922-0.09999-0.799922-0.09999-1.499854-0.19998-2.299775-0.299971-0.299971 0-0.599941-0.09999-0.899913-0.19998-12.098818-2.699736-21.597891-12.198809-24.297627-24.297628-0.09999-0.299971-0.09999-0.599941-0.19998-0.899912-0.09999-0.299971-0.09999-0.599941-0.199981-0.899912-0.09999-0.699932-0.19998-1.499854-0.29997-2.299775 0-0.299971 0-0.499951-0.099991-0.799922v-0.999903V899.912118c0-2.199785 1.799824-3.999609 3.99961-3.999609h667.934772c17.798262 0 32.096866 14.298604 32.096865 31.996875zM160.034372 827.919149V95.990626c0-17.698272 14.298604-31.996875 31.996875-31.996875h639.937506c17.698272 0 31.996875 14.298604 31.996875 31.996875v671.934381c0 35.296553-28.697198 63.993751-63.99375 63.993751H164.033981c-2.199785 0-3.999609-1.799824-3.999609-3.999609z" p-id="16407" fill="#ffffff"></path><path d="M703.981252 283.972268c0 2.199785-1.799824 3.999609-3.99961 3.99961H324.018358c-2.199785 0-3.999609-1.799824-3.99961-3.99961v-55.994531c0-2.199785 1.799824-3.999609 3.99961-3.99961h375.963284c2.199785 0 3.999609 1.799824 3.99961 3.99961v55.994531zM272.023435 159.984377c-8.799141 0-15.998438 7.199297-15.998437 15.998437v159.984377c0 8.799141 7.199297 15.998438 15.998437 15.998437h479.95313c8.799141 0 15.998438-7.199297 15.998437-15.998437V175.982814c0-8.799141-7.199297-15.998438-15.998437-15.998437H272.023435zM759.975784 479.95313H264.024216c-4.39957 0-7.999219-3.599648-7.999218-7.999219v-47.995313c0-4.39957 3.599648-7.999219 7.999218-7.999219h495.951568c4.39957 0 7.999219 3.599648 7.999218 7.999219v47.995313c0 4.39957-3.599648 7.999219-7.999218 7.999219zM759.975784 607.940631H264.024216c-4.39957 0-7.999219-3.599648-7.999218-7.999219v-47.995313c0-4.39957 3.599648-7.999219 7.999218-7.999219h495.951568c4.39957 0 7.999219 3.599648 7.999218 7.999219v47.995313c0 4.39957-3.599648 7.999219-7.999218 7.999219z" p-id="16408" fill="#ffffff">

              </path></svg>
              <span v-if="!isSidebarCollapsed">书籍表</span>
            </router-link>
            <router-link to="/admin/event-table" class="menu-item">
              <svg t="1750657513304" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17709" width="25" height="25"><path d="M944.632 260.143l-78.787 514.583c0 32.084-26.01 58.094-58.094 58.094H174v13.203c0 32.084 26.01 58.094 58.094 58.094h665.438c32.084 0 58.094-26.009 58.094-58.094V294.131a57.797 57.797 0 0 0-10.994-33.988z" p-id="17710" fill="#ffffff"></path><path d="M785.179 806.168H131.331c-37.068 0-67.223-29.278-67.223-65.267v-0.799l0.126-0.788 82.909-522.923c0.462-35.604 30.439-64.432 67.218-64.432h62.206v115.767c0 11.879 9.664 21.545 21.545 21.545H329.8c11.879 0 21.545-9.666 21.545-21.545V151.958h79.699v115.767c0 11.88 9.664 21.545 21.545 21.545h31.688c11.881 0 21.546-9.666 21.546-21.545V151.958h79.697v115.767c0 11.88 9.666 21.545 21.546 21.545h31.687c11.881 0 21.546-9.666 21.546-21.545V151.958h78.377v115.767c0 11.88 9.666 21.545 21.546 21.545h31.686c11.881 0 21.546-9.666 21.546-21.545V151.958h54.754c37.067 0 67.223 29.278 67.223 65.266v0.799l-0.125 0.789-82.908 522.922c-0.462 35.606-30.439 64.434-67.219 64.434zM84.398 741.659c0.423 24.455 21.314 44.225 46.934 44.225H785.18c25.882 0 46.939-20.18 46.939-44.984v-0.799l0.125-0.789 82.896-522.846c-0.422-24.455-21.313-44.224-46.932-44.224h-34.47v95.483c0 23.064-18.765 41.829-41.83 41.829h-31.686c-23.065 0-41.83-18.765-41.83-41.829v-95.483h-37.809v95.483c0 23.064-18.765 41.829-41.83 41.829h-31.687c-23.065 0-41.83-18.765-41.83-41.829v-95.483h-39.13v95.483c0 23.064-18.765 41.829-41.83 41.829h-31.688c-23.065 0-41.829-18.765-41.829-41.829v-95.483h-39.132v95.483c0 23.064-18.764 41.829-41.829 41.829H298.11c-23.064 0-41.829-18.765-41.829-41.829v-95.483H214.36c-25.882 0-46.939 20.177-46.939 44.982v0.799l-0.125 0.789-82.898 522.847z" p-id="17711" fill="#ffffff"></path><path d="M297.003 115.89h34.495v133.351h-34.495V115.89zM452.674 115.89h34.493v133.351h-34.493V115.89zM606.714 115.89h34.493v133.351h-34.493V115.89zM761.899 115.89h34.493v133.351h-34.493V115.89zM373.37 408.368l-129.341 1.038-11.301 74.342 113.027-0.908-4.414 29.04-113.028 0.908-15.892 104.545-37.287 0.299 36.199-238.128 166.628-1.337-4.591 30.201zM535.365 613.58l-34.956 0.28 4.414-29.04c-15.729 21.772-36.463 33.158-62.217 34.146-42.731 0.342-60.675-21.938-53.846-66.859l16.422-108.029 34.957-0.281-15.892 104.545c-4.591 30.201 6.695 45.194 33.895 44.976 28.319-2.548 45.997-19.313 53.037-50.314l15.187-99.897 34.957-0.281-25.958 170.754zM735.61 613.134l-34.957 0.28 15.54-102.221c4.708-30.964-6.218-45.958-32.732-44.983-27.438 1.779-45.38 17.767-53.848 48l-15.187 99.897-34.958 0.28 26.136-171.917 34.958-0.281-4.591 30.202c17.276-21.783 38.851-33.557 64.723-35.325 42.064-1.099 59.106 21.968 51.161 69.199L735.61 613.134zM406.376 358.827h73.058v21.125h-73.058v-21.125zM265.542 626.341H338.6v21.124h-73.058v-21.124zM552.931 358.827h73.058v21.125h-73.058v-21.125zM706.088 358.827h73.058v21.125h-73.058v-21.125z" p-id="17712" fill="#ffffff">

              </path></svg>
              <span v-if="!isSidebarCollapsed">活动表</span>
            </router-link>
            <router-link to="/admin/event-category-table" class="menu-item">
              <svg t="1750657656026" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21121" width="25" height="25"><path d="M58.368 754.688c0 116.224 94.208 210.944 210.944 210.944s210.944-94.208 210.944-210.944v-210.944H268.8c-116.224 0.512-210.432 94.72-210.432 210.944z m907.264-485.888c0-116.224-94.208-210.944-210.944-210.944s-210.944 94.208-210.944 210.944v210.944h210.944c116.736 0 210.944-94.208 210.944-210.944zM268.8 479.744h210.944V268.8c0-116.224-94.208-210.944-210.944-210.944S58.368 152.576 58.368 268.8c0 116.736 94.208 210.944 210.432 210.944z m485.888 64.512h-210.944v210.944c0 116.224 94.208 210.944 210.944 210.944s210.944-94.208 210.944-210.944-94.208-210.944-210.944-210.944z" fill="#ffffff" p-id="21122">

              </path></svg>
              <span v-if="!isSidebarCollapsed">活动种类表</span>
            </router-link>
            <router-link to="/admin/book-category-table" class="menu-item">
              <svg t="1750657463522" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16625" width="25" height="25">
                <path d="M262.1 639.7h52c3.3 0 6-2.7 6-6V197.6c0-3.3-2.7-6-6-6h-52c-3.3 0-6 2.7-6 6v436.2c0 3.3 2.6 5.9 6 5.9zM261.8 831.7h52c3.3 0 6-2.7 6-6V709.8c0-3.3-2.7-6-6-6h-52c-3.3 0-6 2.7-6 6v115.9c0 3.3 2.7 6 6 6z" fill="#ffffff" p-id="16626"></path><path d="M639.9 139.8v110c0 3.3-2.7 6-6 6H454.1c-3.3 0-6-2.7-6-6v-174c0-6.6-5.4-12-12-12H140c-6.6 0-12 5.4-12 12v872c0 6.6 5.4 12 12 12h744.1c6.6 0 12-5.4 12-12v-808c0-6.6-5.4-12-12-12H651.9c-6.6 0-12 5.3-12 12zM378 895.7H198c-3.3 0-6-2.7-6-6v-756c0-3.3 2.7-6 6-6h180.1c3.3 0 6 2.7 6 6l-0.1 756c0 3.3-2.6 6-6 6z m255.9-511.9H518.1c-3.3 0-6 2.7-6 6v52c0 3.3 2.7 6 6 6h115.8c3.3 0 6 2.7 6 6v52.1c0 3.3-2.7 6-6 6H518c-3.3 0-6 2.7-6 6v52c0 3.3 2.7 6 6 6h115.9c3.3 0 6 2.7 6 6v51.8c0 3.3-2.7 6-6 6H518.1c-3.3 0-6 2.7-6 6v52c0 3.3 2.7 6 6 6h115.8c3.3 0 6 2.7 6 6v180c0 3.3-2.7 6-6 6H454.1c-3.3 0-6-2.7-6-6v-564c0-3.3 2.7-6 6-6h179.8c3.3 0 6 2.7 6 6v52c0 3.4-2.7 6.1-6 6.1z m76.3 511.9c-3.3 0-6-2.7-6-6v-634h-0.3v-58c0-3.3 2.7-6 6-6h116.3c3.3 0 6 2.7 6 6v52c0 3.3-2.7 6-6 6h-52c-3.3 0-6 2.7-6 6v115.8c0 3.3 2.7 6 6 6h52c3.3 0 6 2.7 6 6V442c0 3.3-2.7 6-6 6h-52c-3.3 0-6 2.7-6 6v115.8c0 3.3 2.7 6 6 6h52c3.3 0 6 2.7 6 6v51.9c0 3.3-2.7 6-6 6h-52c-3.3 0-6 2.7-6 6v115.8c0 3.3 2.7 6 6 6h52c3.3 0 6 2.7 6 6v116.1c0 3.3-2.7 6-6 6h-116z" fill="#ffffff" p-id="16627">

              </path></svg>
              <span v-if="!isSidebarCollapsed">书籍种类表</span>
            </router-link>
            <router-link to="/admin/event-participation-record-table" class="menu-item">
              <svg t="1750657743401" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22210" width="25" height="25"><path d="M895.946487 1024H128.053513V128.124863h128.622073v63.991081H192.044594v767.892975h639.910812V192.115944h-66.230769V128.124863H895.946487v895.875137z" fill="#ffffff" p-id="22211"></path><path d="M703.973244 256.107025H320.026756V64.133781h100.146042a95.986622 95.986622 0 0 1 181.09476 0H703.973244zM384.017838 192.115944h255.964324V128.124863h-95.986621V96.129322a31.995541 31.995541 0 0 0-63.991082 0v31.995541h-95.986621zM319.706801 512.07135h383.946487v63.991081h-383.946487zM319.706801 640.053513h383.946487v63.991081h-383.946487zM319.706801 768.035675h383.946487v63.991081h-383.946487zM319.706801 384.089188h159.977703v63.991081h-159.977703z" fill="#ffffff" p-id="22212">

              </path></svg>
              <span v-if="!isSidebarCollapsed">活动参与记录表</span>
            </router-link>
          </div>
        </div>
      </div>

    <div class="main-content">
      
      <!-- 内容区域 -->
      <div class="content-area" :class="{'expanded': isSidebarCollapsed}">
        <router-view></router-view>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import avatar_boy from '@/assets/avatar_boy.png';
import brandMark from '@/assets/logo.png';


const isSidebarCollapsed = ref(false);
const showCard = ref(false);

const userInfo = ref({
  username: '代文波',
  email: 'admin@2251557.com',
  role: '管理员',
  avatar: avatar_boy
})

const toggleSidebar = () => {
  isSidebarCollapsed.value = !isSidebarCollapsed.value;
};

const showUserCard = () => {
  showCard.value = true;
};

const hideUserCard = () => {
  showCard.value = false;
};
</script>

<style lang="scss" scoped >
  .page-container {
    display: flex;
    flex-direction: column;
    min-height: 100%; // 确保页面容器至少占满整个视口高度
    min-width: 100%;
    position: absolute; // 使用 fixed 定位，确保 header 固定在顶部
    top: 0;
    left: 0;

    .header {
      background-color: #3498db;
      color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      height: 70px;
      width: 100%;

      position: absolute; // 使用 fixed 定位，确保 header 固定在顶部
      top: 0;
      left: 0;
      z-index: 10;

      .header-left {
        position: absolute; // 使用 fixed 定位，确保 header 固定在顶部
        top: 8px;
        left: 15px;

        display: flex;
        align-items: center;

        .sidebar-toggle {
          background: none;
          border: none;
          color: white;
          font-size: 24px;
          cursor: pointer;
          margin-right: 15px;
          display: flex;
          align-items: center;
        }
        .brand-mark{
          width: 45px;
          height: 45px;
          margin-right: 15px;
        }
        .page-title {
          font-size: 20px;
          font-weight: bold;
        }
      }

      .header-right {
        position: absolute; // 使用 fixed 定位，确保 header 固定在顶部
        top: 15px;
        right: 20px;

        display: flex;
        align-items: center;

        .user-profile {
          display: flex;
          align-items: center;
          cursor: pointer;
          position: relative;

          .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
          }

          .user-info-card {
            position: absolute;
            top: 60px;
            right: 0;
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 150px;
            z-index: 100;

            .card-content {
              display: flex;
              flex-direction: column;

              .user-name {
                font-weight: bold;
                color: #7f8c8d;
                margin-bottom: 5px;
              }

              .user-role {
                color: #7f8c8d;
                margin-bottom: 5px;
              }

              .user-email {
                font-size: 14px;
                color: #3498db;
              }
            }
          }
        }
      }
    }

    .sidebar {
      width: 210px;
      background-color: #2c3e50;
      color: #ecf0f1;
      height: calc(100% - 70px); // 设置侧边栏高度为视口高度减去 header 的高度
      position: absolute;
      top: 70px;
      left: 0;

      transition: width 0.1s;
      z-index: 5;

      &.collapsed {
        width: 72px;
      }

      .sidebar-header {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid #34495e;

        .sidebar-title {
          margin: 0;
          font-size: 18px;
          font-weight: bold;
        }
      }

      .sidebar-menu {
        padding: 10px 0;

        .menu-group {
          margin-bottom: 20px;

          .menu-group-title {
            padding: 10px 20px;
            font-size: 14px;
            color: #95a5a6;
            text-transform: uppercase;
          }

          .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #ecf0f1;
            text-decoration: none;
            transition: background-color 0.3s;
            margin-bottom: 20px;

            &:hover {
              background-color: #1a7ee2;
            }

            i {
              width: 24px;
              text-align: center;
              font-size: 18px;
            }

            span {
              margin-left: 10px;
            }
          }
        }
      }
    }

    .main-content {
      padding-top: 70px; // 为了避免内容被 header 遮挡
      display: flex;
      flex: 1;

      .content-area {
        flex: 1;
        padding-left: 220px;
        transition: margin-left 0.3s;
        overflow-y: auto;

        &.expanded {
          padding-left: 80px;
        }
      }
    }
  }
</style>